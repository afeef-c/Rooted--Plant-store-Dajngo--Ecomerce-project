{% extends 'customadmin/admin_base.html' %}
{% load static %}



{% block content %}
  {% block page_title %}
    Dashboard
  {% endblock page_title %}    
      

{% block page_content %}
  <div class="row">

    <div class="col-lg-4 col-md-4 col-sm-12">
      <div class="card card-statistic-2">
        <div class="card-stats">
          <div class="card-stats-title">Order Statistics -
            <a href="/admin/orders_list/" class="btn btn-danger">View More <i class="fas fa-chevron-right"></i></a>

          </div>
          <div class="card-stats-items">
            <div class="card-stats-item">
              <div class="card-stats-item-count"> {{confimed_orders.count}} </div>
              <div class="card-stats-item-label">Confirmed</div>
            </div>
            <div class="card-stats-item">
              <div class="card-stats-item-count"> {{completed_orders.count}} </div>
              <div class="card-stats-item-label">Completed</div>
            </div>
            <div class="card-stats-item">
              <div class="card-stats-item-count"> {{delivered_orders.count}} </div>
              <div class="card-stats-item-label">Delivered</div>
            </div>
          </div>
        </div>
        <div class="card-icon shadow-primary bg-primary">
          <i class="fas fa-archive"></i>
        </div>
        <div class="card-wrap">
          <div class="card-header">
            <h4>Total Orders</h4>
          </div>
          <div class="card-body">
            {{orders_count}}
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4 col-md-4 col-sm-12">
      <div class="card card-statistic-2">
        <div class="card-chart"><div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
          <canvas id="balance-chart" height="188" width="796" style="display: block; height: 94px; width: 398px;" class="chartjs-render-monitor"></canvas>
        </div>
        <div class="card-icon shadow-primary bg-primary">
          <i class="fas fa-rupee-sign"></i>
        </div>
        <div class="card-wrap">
          <div class="card-header">
            <h4>Total Revenue</h4>
          </div>
          <div class="card-body">
            â‚¹ {{total_revenue}}
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4 col-md-4 col-sm-12">
      <div class="card card-statistic-2">
        <div class="card-chart"><div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
          <canvas id="sales-chart" height="188" width="796" style="display: block; height: 94px; width: 398px;" class="chartjs-render-monitor"></canvas>
        </div>
        <div class="card-icon shadow-primary bg-primary">
          <i class="fas fa-shopping-bag"></i>
        </div>
        <div class="card-wrap">
          <div class="card-header">
            <h4>Sales</h4>
          </div>
          <div class="card-body">
            {{sales_count}}
          </div>
        </div>
      </div>
    </div>

  </div>


  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h4>Invoices</h4>
          <div class="card-header-action">
            <a href="{% url 'orders_list' %}" class="btn btn-danger">View More <i class="fas fa-chevron-right"></i></a>
          </div>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive table-invoice">
            <table class="table table-striped">
              <tbody><tr>
                <th>Invoice ID</th>
                <th>Customer</th>
                <th>Status</th>
                <th>Due Date</th>
                <th>Action</th>
              </tr>
              {% for order in top_oders %}
              <tr>
                
                <td><a href="#"> {{order.payment.payment_id|slice:"-4:"}} </a></td>
                <td class="font-weight-600"> {{order.full_name}} </td>
                <td>
                  {% if order.payment.status == 'SUCCESS' %}
                  <div class="badge badge-success">Paid</div>
                  {% else %}
                  <div class="badge badge-warning">Unpaid</div>
                  {% endif %}
                </td>
                <td> {{order.created_at}} </td>
                <td>
                  <a href="{% url 'order_update' order.id %}" class="btn btn-primary">Detail</a>
                </td>
              </tr>
              {% endfor %}
              
            </tbody></table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      
      <div class="card gradient-bottom">
        <div class="card-header">
          <h4>Update stocks</h4>
          <div class="card-header-action dropdown">
            <a href="#" data-toggle="dropdown" class="btn btn-danger dropdown-toggle">Month</a>
            <ul class="dropdown-menu dropdown-menu-sm dropdown-menu-right">
              <li class="dropdown-title">Select Period</li>
              <li><a href="#" class="dropdown-item">Today</a></li>
              <li><a href="#" class="dropdown-item">Week</a></li>
              <li><a href="#" class="dropdown-item active">Month</a></li>
              <li><a href="#" class="dropdown-item">This Year</a></li>
            </ul>
          </div>
        </div>
        <div class="card-body" id="top-5-scroll" tabindex="2" style="height: 315px; overflow: hidden; outline: none;">
          <ul class="list-unstyled list-unstyled-border">
            {% for product in out_of_stock_products %}
            <a href="{% url 'product_update' product.id %}">
            <li class="media">
              <img class="mr-3 rounded" width="55" src="{{product.images.url}}" alt="product">
              <div class="media-body">
                <div class="float-right"><div class="font-weight-600 text-muted text-small">
                  {% if product.stock == 0 %}Out of Stock 
                  {% else %} only {{product.stock}} more stokcs
                  {% endif %}
                  </div>
                </div>
                <div class="media-title"> {{product.product_name}} </div>
                
              </div>
              
            </li>
            </a>
            {% endfor %}
          </ul>
        </div>
        <div class="card-footer pt-3 d-flex justify-content-center">
          
        </div>
      </div>
      
    </div>
    
  </div>


    
{% endblock page_content %}


{% endblock %}


{% block custom_js %}
  
{% endblock custom_js %}

