
{% extends 'partials/base.html' %}
{% load static %}



{% block content %}

<div class="row m-5">
				<!-- login page -->
    <div class="col-lg-3"></div>
    <div class="col-lg-6 mb-md-50 mb-sm-50">
        <div class="lezada-form login-form">
            <form action="{% url 'otp_fp_verify' uid=id %}" method="POST">
                {% csrf_token %}
                <div class="row">
                    <div class="col-lg-12">
                        <!--=======  login title  =======-->

                        <div class="section-title section-title--login text-center mb-50">
                            <h2 class="mb-20">OTP VERIFICATION</h2>
                            <p>Check your mail for OTP!</p>
                        </div>

                        <!--=======  End of login title  =======-->
                    </div>
                    <div class="col-lg-12 mb-60">
                        <input type="text" name="otp" id="otp" placeholder=" Enter your 6 digite otp here" required>
                    </div>
                    <div class="col-lg-12 text-center mb-30">
                        <button type="submit" class="lezada-button lezada-button--medium">Verify OTP</button>
                    </div>
                    <div class="col-lg-12 mb-60 text-right">
                        <span id="countdown"></span>
                        <a href="{% url 'resend_otp' uid=id %}" id="resend-link">Resend OTP</a>
                    </div>

                    
                </div>
            </form>
        </div>
    </div>
</div>


{% endblock content %}

{% block js %}

<script>
    var countdownElement = document.getElementById('countdown');
    var resendLink = document.getElementById('resend-link');
    var countdown = localStorage.getItem('countdown') || 60; // Countdown duration in seconds, or use 60 if not set

    function startCountdown() {
        var timer = setInterval(function() {
            countdown--;
            countdownElement.innerText = countdown + ' seconds until resend';
            localStorage.setItem('countdown', countdown); // Save countdown value to local storage
            if (countdown <= 0) {
                clearInterval(timer);
                countdownElement.innerText = '';
                resendLink.style.display = 'inline'; // Show resend link
            }
        }, 1000); // Update every second
    }

    window.onload = function() {
        // Start countdown if it's not already expired
        if (countdown > 0) {
            startCountdown();
        } else {
            resendLink.style.display = 'inline'; // Show resend link if countdown already expired
        }
    };
</script>


{% endblock js %}